<clr-alert *ngIf="fileSuccess" [clrAlertType]="'alert-success'" [clrAlertAppLevel]="fileSuccess">
  <clr-alert-item>
        <span class="alert-text">
            Upload successful!
        </span>
  </clr-alert-item>
</clr-alert>

<clr-alert *ngIf="fileError" [clrAlertType]="'alert-danger'" [clrAlertAppLevel]="fileError">
  <clr-alert-item>
        <span class="alert-text">
            Error reading file!
        </span>
  </clr-alert-item>
</clr-alert>

<div class="row" *ngIf="uploaderVisible">
  <div class="col-xs"></div>
  <div class="col-xs-6">
    <form>
      <section class="form-block">
        <label>Generate Graph</label>
        <div class="form-group">
          <label for="provider_select">Choose data provider</label>
          <div class="select">
            <select id="provider_select" #providerSelect (change)="changeDataProvider(providerSelect.value)">
              <option value="manual">Paste data manually</option>
              <option value="file" selected>Upload file</option>'
            </select>
          </div>
        </div>
        <div class="form-group" *ngIf="dataProvider === 'manual'">
          <label for="manualdata">Enter data</label>
          <textarea name="manuel" id="manualdata" [(ngModel)]="dataValue" rows="5"></textarea>
        </div>
        <div class="form-group" *ngIf="dataProvider === 'file'">
          <label for="upload">Upload data</label>
          <input type="file" id="upload" (change)="fileChanged($event)"/>
        </div>
        <div class="form-group" *ngIf="dataProvider === 'file'">
          <button [disabled]="!file" (click)="uploadFile()" class="btn btn-outline btn-sm">Upload</button>
        </div>
        <button type="submit" (click)="saveData()" class="btn btn-primary">Generate</button>
      </section>
      <section>
        <div *ngIf="error">
          <p>{{error}}</p>
        </div>
      </section>
    </form>
  </div>
  <div class="col-xs"></div>
</div>

<div class="row" *ngIf="options">
  <div class="col-xs-8" id="graph-container">
    <app-graph [options]="options" (tableData)="receivedTableData($event)"></app-graph>
  </div>
  <div class="col-xs-4">
    <clr-tabs>
      <clr-tab>
        <button clrTabLink>Centrality</button>
        <ng-template [(clrIfActive)]="centralityActive">
          <clr-tab-content>
            <div class="btn-group btn-primary mt-20">
              <button class="btn"
                      [disabled]="mode === modes.Eigenvector"
                      (click)="changeVizMode(modes.Eigenvector)">
                Eigenvector
              </button>
              <button class="btn"
                      [disabled]="mode === modes.Betweenness"
                      (click)="changeVizMode(modes.Betweenness)">
                Betweenness
              </button>
              <button class="btn"
                      [disabled]="mode === modes.Closeness"
                      (click)="changeVizMode(modes.Closeness)">
                Closeness
              </button>
              <button class="btn"
                      [disabled]="mode === modes.Degree"
                      (click)="changeVizMode(modes.Degree)">
                Degree
              </button>
            </div>
            <div *ngIf="tableData">
              <table class="table">
                <thead>
                <tr>
                  <th>ID</th>
                  <th *ngIf="mode === modes.Eigenvector">EigenVector</th>
                  <th *ngIf="mode === modes.Betweenness">Betweenness</th>
                  <th *ngIf="mode === modes.Closeness">Closeness</th>
                  <th *ngIf="mode === modes.Degree">Degree</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let key of tableDataKeys">
                  <td>{{key}}</td>
                  <td>{{tableData[key]}}</td>
                </tr>
                </tbody>
              </table>
            </div>
          </clr-tab-content>
        </ng-template>
      </clr-tab>

      <clr-tab>
        <button clrTabLink>Customise</button>
        <ng-template [(clrIfActive)]="customiserActive">
          <clr-tab-content>
            <app-customiser></app-customiser>
          </clr-tab-content>
        </ng-template>
      </clr-tab>
    </clr-tabs>
  </div>
</div>

<!--<div class="form-group">
          <label for="height">Height</label>
          <input type="number" name="height" [(ngModel)]="heightValue" id="height" placeholder="Enter height" size="12">
        </div>
        <div class="form-group">
          <label for="width">Width</label>
          <input type="number" name="width" [(ngModel)]="widthValue" id="width" placeholder="Enter width" size="12">
        </div>-->

<!--
<div class="row" *ngIf="!error && options">
  <div class="col-xs"></div>
  <div class="col-xs-6">
    <app-line-chart [options]="options"></app-line-chart>
  </div>
  <div class="col-xs"></div>
</div>
-->



