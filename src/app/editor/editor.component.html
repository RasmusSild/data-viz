<clr-wizard #wizard [(clrWizardOpen)]="wizardOpen" clrWizardSize="lg" [clrWizardClosable]="false">
  <clr-wizard-title>Steps to generate graph</clr-wizard-title>

  <clr-wizard-button [type]="'cancel'">Cancel</clr-wizard-button>
  <clr-wizard-button [type]="'previous'">Back</clr-wizard-button>
  <clr-wizard-button [type]="'next'">Next</clr-wizard-button>
  <clr-wizard-button [type]="'finish'">Finish</clr-wizard-button>

  <clr-wizard-page (clrWizardPageCustomButton)="page1Handler($event)">
    <ng-template clrPageButtons>
      <clr-wizard-button [type]="'custom-next'">Next</clr-wizard-button>
    </ng-template>
    <ng-template clrPageTitle>Upload data</ng-template>
    <form *ngIf="uploaderVisible">
      <section class="form-block">
        <!--<div class="form-group">
          <label for="provider_select">Choose data provider</label>
          <div class="select">
            <select id="provider_select" #providerSelect (change)="changeDataProvider(providerSelect.value)">
              <option value="manual">Paste data manually</option>
              <option value="file" selected>Upload file</option>'
            </select>
          </div>
        </div>-->
        <!--<div class="form-group" *ngIf="dataProvider === 'manual'">
          <label for="manualdata">Enter data</label>
          <textarea name="manuel" id="manualdata" [(ngModel)]="dataValue" rows="5"></textarea>
        </div>-->
        <div class="form-group" *ngIf="dataProvider === 'file'">
          <label for="upload">Upload data</label>
          <input type="file" id="upload" (change)="fileChanged($event)"/>
        </div>
        <div class="form-group" *ngIf="dataProvider === 'file'">
          <button [disabled]="!file" (click)="uploadFile()" class="btn btn-outline btn-sm">Upload</button>
        </div>
      </section>
      <section>

        <!--************ Error messages ************-->
        <div *ngIf="fileSuccess">
          <clr-alert [clrAlertType]="'alert-success'">
            <div class="alert-item">
              <span class="alert-text">
                  File upload successful!
              </span>
            </div>
          </clr-alert>
        </div>
        <div *ngIf="fileError">
          <clr-alert [clrAlertType]="'alert-danger'">
            <div class="alert-item">
              <span class="alert-text">
                  Error reading file!
              </span>
            </div>
          </clr-alert>
        </div>
        <div *ngIf="error">
          <clr-alert [clrAlertType]="'alert-danger'">
            <div class="alert-item">
              <span class="alert-text">
                  {{error}}
              </span>
            </div>
          </clr-alert>
        </div>
      </section>
      <!--*****************************************-->

    </form>
  </clr-wizard-page>

  <clr-wizard-page (clrWizardPageCustomButton)="page2Handler($event)">
    <ng-template clrPageButtons>
      <clr-wizard-button [type]="'custom-previous'">Previous</clr-wizard-button>
      <clr-wizard-button [type]="'custom-finish'">Finish</clr-wizard-button>
    </ng-template>
    <ng-template clrPageTitle>Initial setup</ng-template>
    <form *ngIf="dataColumns">
      <section class="form-block">
        <div class="form-group">
          <label for="root-select">Root nodes column:</label>
          <div class="select">
            <select id="root-select" [(ngModel)]="rootNodeValue" [ngModelOptions]="{standalone: true}">
              <option *ngFor="let column of dataColumns" [selected]="column == dataColumns[0]" [attr.value]="column">{{column}}</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="dest-select">Destination nodes column:</label>
          <div class="select">
            <select id="dest-select" [(ngModel)]="destNodeValue" [ngModelOptions]="{standalone: true}">
              <option *ngFor="let column of dataColumns" [selected]="column == dataColumns[1]" [attr.value]="column">{{column}}</option>
            </select>
          </div>
        </div>
        <div class="checkbox">
          <input type="checkbox" [(ngModel)]="showArrows" [ngModelOptions]="{standalone: true}" id="dirCheck">
          <label for="dirCheck">Directed graph</label>
        </div>
      </section>
    </form>
  </clr-wizard-page>

</clr-wizard>

<div class="row" id="editor" *ngIf="options">
  <div class="col-xs-8" id="graph-container">
    <app-graph [options]="options" (tableData)="receivedTableData($event)" (sendFullTableData)="receivedFullTableData($event)"></app-graph>
  </div>
  <div id="toolbar" class="col-xs-4 editor-toolbar">
    <clr-tabs>
      <clr-tab>
        <button clrTabLink>Centrality</button>
        <ng-template [(clrIfActive)]="centralityActive">
          <clr-tab-content>
            <div class="btn-group btn-primary mt-20">
              <button class="btn"
                      [disabled]="mode === modes.Eigenvector"
                      (click)="changeVizMode(modes.Eigenvector)">
                Eigenvector
              </button>
              <button class="btn"
                      [disabled]="mode === modes.Betweenness"
                      (click)="changeVizMode(modes.Betweenness)">
                Betweenness
              </button>
              <button class="btn"
                      [disabled]="mode === modes.Closeness"
                      (click)="changeVizMode(modes.Closeness)">
                Closeness
              </button>
              <button class="btn"
                      [disabled]="mode === modes.Degree"
                      (click)="changeVizMode(modes.Degree)">
                Degree
              </button>
            </div>
            <!--<div class="form-group">
              <div class="toggle-switch">
                <input type="checkbox" id="toggle_1"
                       [checked]="mode === modes.Eigenvector"
                       [disabled]="mode === modes.Eigenvector">
                <label for="toggle_1">Eigenvector</label>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="toggle_2"
                       [checked]="mode === modes.Betweenness"
                       [disabled]="mode === modes.Betweenness">
                <label for="toggle_2">Betweenness</label>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="toggle_3"
                       [checked]="mode === modes.Closeness"
                       [disabled]="mode === modes.Closeness">
                <label for="toggle_3">Closeness</label>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="toggle_4"
                       [checked]="mode === modes.Degree"
                       [disabled]="mode === modes.Degree">
                <label for="toggle_4">Degree</label>
              </div>
            </div>-->
            <div *ngIf="tableData">
              <app-centrality-table (close)="showCentralityTable = false" [open]="showCentralityTable" [data]="centralityTableData"></app-centrality-table>
              <button class="btn"
                      [disabled]="!centralityTableData"
                      (click)="showCentralityTable = true">
                Show full table
              </button>
              <table class="table data-table">
                <thead>
                <tr>
                  <th>ID</th>
                  <th *ngIf="mode === modes.Eigenvector">EigenVector</th>
                  <th *ngIf="mode === modes.Betweenness">Betweenness</th>
                  <th *ngIf="mode === modes.Closeness">Closeness</th>
                  <th *ngIf="mode === modes.Degree">Degree</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let key of tableDataKeys">
                  <td>{{key}}</td>
                  <td>{{tableData[key]}}</td>
                </tr>
                </tbody>
              </table>
            </div>
          </clr-tab-content>
        </ng-template>
      </clr-tab>

      <clr-tab>
        <button clrTabLink>Customise</button>
        <ng-template [(clrIfActive)]="customiserActive">
          <clr-tab-content>
            <app-customiser [inputStyleObj]="graphStyle" [graphOptions]="options" (sendStyleObject)="receivedStyleObject($event)"></app-customiser>
          </clr-tab-content>
        </ng-template>
      </clr-tab>
    </clr-tabs>
  </div>
</div>



